## LAB 1 QnA
This lab contains 5 steps:
1.	Create your own QnA Maker service
2. Consume your QnA Maker service
3.	Connect your QnA Maker service to the Azure Bot Service 
4.	Enable your bot on multiple channels like Skype and Telegram
5.	Embed your bot in your own website

## 1. Create your own QnA Maker service

**Microsoft QnA Maker** is a free, easy-to-use, REST API and web-based service that trains AI to respond to user's questions in a more natural, conversational way. Compatible across development platforms, hosting services, and channels, QnA Maker is the only question and answer service with a graphical user interface—meaning you don’t need to be a developer to train, manage, and use it for a wide range of solutions.
With optimized machine learning logic and the ability to integrate industry-leading language processing with ease, QnA Maker distills masses of information into distinct, helpful answers.

![QnA Maker Overview](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/botFrameworkArch.png)

_Our first action is to create a QnA maker service_
1. Go to the website https://qnamaker.ai/ and sign in with your Microsoft account.
2. Click on **Create new service**.  
![Create new QnA Service0](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService0.png)
3. Enter the **Name** of your service and the web page URL that contains your **FAQ** (you can also enter the questions and answers manually or you can upload a file with your questions and answers).  
![Create new QnA Service](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService.png)
4. For example you could use the URL of the Azure Support FAQs: https://azure.microsoft.com/en-us/support/faq/
5. The site will import the **FAQ**…  
![Create new QnA Service2](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService2.png)
6. ...then display it in a FAQ database. You can edit the content of the database on this screen.  
![Create new QnA Service3](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService3.png)
7. The test screen allows you to chat with the Bot who responds by retrieving the appropriate answer from the FAQ database. This screen allows you to train the Bot by indicating what answer the Bot should give to a particular question, or by supplying a new answer.  
![Create new QnA Service4](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService4.png)
8. When you have completed training, click the **Save and retrain** button. Finally, click the **Publish** button.
![Create new QnA Service5](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService5.png)
9. You will see a confirmation screen. Click **Publish** again.  
![Create new QnA Service6](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService6.png)
11. You will then be presented with the information needed to consume the Bot.  
![Create new QnA Service7](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService7.png)
12. Note, you can always get back to these values by selecting **My services**, selecting the service, then **Settings**.  
![Create new QnA Service8](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/CreateQnAService8.png)

## 2. Consume your QnA Maker service
Each published QnA Maker service is exposed as an HTTP endpoint that will take in a question and respond back with the best matched answer and a confidence score. You only need two GUIDs to access your knowledge base via the HTTP endpoint
* Knowledge Base ID: This is auto-generated by the system for every published QnA Maker service.  
* Subscription Key: These are assigned per account, and is used for metering.
 
### 2.1 Postman

**Postman** is a popular API client that makes it easy for developers to create, share, test and document APIs. This is done by allowing users to create and save simple and complex HTTP/s requests, as well as read their responses. 

_Our second action is to run an API request via Postman_

1. Go to [https://www.getpostman.com/apps](https://www.getpostman.com/apps)
2. Install and run Postman.
3. Now let’s create our API request!
  - Use the dropdown to change the request method from **GET** to **POST**
  - Combine the **Host URL** and **Post URL** from step 1.11  
  For example: https://westus.api.cognitive.microsoft.com/qnamaker/v2.0/knowledgebases/0b16d1ff-e23a-4ce1-b7ef-77bece70314c/generateAnswer
  - Headers
    - Add header Ocp-Apim-Subscription-Key with your subscription key from step 1.11  
    For example: 00bd519ba9784c6aae0f33acef7a1d1c
    - Add header Content-Type with value "application/json"  
    ![Postman1](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/Postman1.png)
4. On the **Body** select **Raw** and in the body field add **{"question":"hi"}**  
![Postman2](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/Postman2.png)
5. Click **Send**, and study the result  
![Postman3](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/Postman3.png)

## 3. Connect your QnA Maker service to the Azure Bot Service  
**Bot Service** provides what you need to build, connect, test, deploy, monitor, and manage bots. Bot Service provides the core components for creating bots.

_Our third action is to consume our QnA Maker service in the Azure Bot Service._

1. Go to the [Azure Portal](https://portal.azure.com/)
2. Login with your Microsoft account, you need an **Azure subscription**
3. Click **Create a resource**, located in the top left corner of the screen
4. Search for **bot**
5. Select _Web App Bot_, and click **Create**
6. Fill out the following fields
* Bot name (for example: "GABCAzureSupportBot")
* Subscription (choose your **subscription**)
* Resource group (**Create New**)
* Provide a **name** (for example "GABCAzureSupportBot")
* Location (Select **West Europe”**)
* Pricing Tier (choose **F0 Free**)
* App name (for example "GABCAzureSupportBot")
* Bot Template (choose **Question and Answer template**)
* App service plan **(Create New**)
* Provide a **name** (for example "GABCAzureSupportBot")
* Select **West Europe**
* Azure storage (**Create New**)
* Provide a **name** (for example "GABCAzureSupportBot")
* Application Insights (choose **Off**)
* Microsoft App ID and password (choose **Auto create App ID and Password**)
![AzureBotService1](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/AzureBotService1.png)
7. Double check your input and make sure that you have chosen the **"Question and Answer Template"** and checked the **"Pin to dashboard"** box  
Click **Create**
8. It will take a while to deploy your bot, relax and wait till your bot is deployed. You can check the status on your dashboard (if you checked the "Pin to dashboard" box on creation). In the mean time check your resource group and make sure that it contains the following resources:  
![Resourcegroup](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/resourcegroup.png)
9. Open your bot and click **Application settings**
13. Under the section **App settings**, you find:
* QnAKnowledgebaseId (put your QandAmaker settings here, for example _67c19131-d968-4a7e-9f16-feffb982d506_)
* QnASubscriptionKey (put your QandAmaker settings here, for example _8e132c2e5c3b43d98c66aa88ee1e9f73_)
![AzureBotService2](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/AzureBotService2.png)
14. In the left menu of the Bot click **Test in Web Chat**
* Type for example _hi_ and see if the webchat provides an answer
![AzureBotService3](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/AzureBotService3.png)

## 4. Enable your bot on multiple channels like Skype and Telegram
A channel is the connection between the Bot Framework and communication apps. You configure a bot to connect to the channels you want it to be available on. For example, a bot connected to the Skype channel can be added to a contact list and people can interact with it in Skype.

_Our fourth action is to connect our bot to Skype or Telegram._

* [Skype Channel instructions](https://docs.microsoft.com/en-us/azure/bot-service/bot-service-channel-connect-skype)
* [Telegram Channel instructions](https://docs.microsoft.com/en-us/azure/bot-service/bot-service-channel-connect-telegram)

## 5. Embed your bot in your own website
This step is optional for the really quick participants of this lab. Show off your HTML and CSS skills.

1. Open your resource group (for example GABZAzureSupportBot) and open your App Service  
![Resourcegroup](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/resourcegroup.png)
2.	On the left menu in the section development tools choose App Service Editor (preview)  
![Embed1](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/Embed1.png)
3.	Click Go  
![Embed2](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/Embed2.png)
4.	Get your embed code from the Web Chat channel  
![Embed3](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/Embed3.png)  
![Embed4](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/Embed4.png)
5. Tweak your HTML and click in the blue top bar on your bot name and choose Browse Web Site  
![Embed5](https://github.com/Rubicon-BV/GlobalAzureBootcamp2018/blob/master/Lab1/Pics/Embed5.png)
6. Your bot is running in your own website, now try to embed your Skype channel for extra kudos

Well done! Show us your awesome bot website based on a QnA Maker service. You rock!!!!! Thanks for staying with us till the very end of this lab.
